<!--<!DOCTYPE html>-->
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="echarts.js"></script>
    <script src="https://upcdn.b0.upaiyun.com/libs/jquery/jquery-2.0.2.min.js"></script>
</head>
<body>
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="width: 100%;height:400px;"></div>
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    // var myChart = echarts.init(document.getElementById('main'));
    //
    // // 指定图表的配置项和数据
    // option = {
    //     title: {
    //         text: '各家adx每分钟监控数据',
    //         subtext: '纯属虚构'
    //     },
    //     tooltip: {
    //         trigger: 'axis'
    //     },
    //     legend: {
    //         data: ['快友请求数', '灵集请求数', '悠易请求数', '百度请求数', '腾讯请求数']
    //     },
    //     toolbox: {
    //         show: true,
    //         feature: {
    //             mark: {show: true},
    //             dataView: {show: true, readOnly: false},
    //             magicType: {show: true, type: ['line', 'bar', 'stack', 'tiled']},
    //             restore: {show: true},
    //             saveAsImage: {show: true}
    //         }
    //     },
    //     calculable: true,
    //     xAxis: [
    //         {
    //             type: 'category',
    //             boundaryGap: false,
    //             data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60]
    //         }
    //     ],
    //     yAxis: [
    //         {
    //             type: 'value',
    //             axisLabel: {
    //                 formatter: '{value}'
    //             }
    //         }
    //     ],
    //     series: [
    //         {
    //             name: '腾讯请求数',
    //             type: 'line',
    //             stack: '总量',
    //             //symbol:'none',  //这句就是去掉点的
    //             smooth: true,//这句就是让曲线变平滑的
    //             data: [1529, 1081, 588, 143, 471, 609, 760, 629, 812, 789, 709, 918, 1166, 881, 674, 613, 468, 713, 494, 772, 1164, 721, 1186, 1145, 882, 799, 890, 1022, 984, 842, 1026, 936, 531, 420, 775, 914, 973, 1706, 927, 958, 1175, 882, 724, 715, 1086, 1190, 661, 901, 804, 988, 979, 1540, 1423, 888, 806, 1120, 1092, 922, 799, 615],
    //             // markPoint: {
    //             //     data: [
    //             //         {type: 'max', name: '最大值'},
    //             //         {type: 'min', name: '最小值'}
    //             //     ]
    //             // },
    //             // markLine: {
    //             //     data: [
    //             //         {type: 'average', name: '平均值'}
    //             //     ]
    //             // }
    //         },
    //         {
    //             name: '快友请求数',
    //             type: 'line',
    //             stack: '总量',
    //             //symbol:'none',  //这句就是去掉点的
    //             smooth: true,//这句就是让曲线变平滑的
    //             //itemStyle : {
    //             //             normal : {
    //             //               lineStyle:{
    //             //                 color:'#00FF00'
    //             //           }
    //             //     }
    //             //}, //线条颜色
    //             data: [36554, 23968, 28984, 25115, 21551, 931, 28916, 29272, 30983, 28496, 28419, 26806, 31636, 34501, 28202, 26949, 29620, 30929, 31803, 35406, 26261, 27343, 26311, 26749, 31446, 26285, 29620, 32008],
    //             //  markPoint : {
    //             //    data : [
    //             //      {type : 'max', name: '最大值'},
    //             //    {type : 'min', name: '最小值'}
    //             //]
    //             //}
    //             //   markLine : {
    //             //         data : [
    //             //              {type : 'average', name : '平均值'}
    //             //         ]
    //             //     }
    //         },
    //         {
    //             name: '灵集请求数',
    //             type: 'line',
    //             stack: '总量',
    //             //symbol:'none',  //这句就是去掉点的
    //             smooth: true,//这句就是让曲线变平滑的
    //             data: [12074, 15561, 18, 12362, 9896, 8923, 10650, 9186, 11267, 9759, 8925, 7769, 9077, 12536, 14000, 10445, 9754, 9652, 10654, 10550, 12258, 10701, 9953],
    //             //  markPoint : {
    //             //     data : [
    //             //       {type : 'max', name: '最大值'},
    //             //     {type : 'min', name: '最小值'}
    //             //]
    //             //}
    //             //   markLine : {
    //             //         data : [
    //             //              {type : 'average', name : '平均值'}
    //             //         ]
    //             //     }
    //         },
    //         {
    //             name: '悠易请求数',
    //             type: 'line',
    //             stack: '总量',
    //             //symbol:'none',  //这句就是去掉点的
    //             smooth: true,//这句就是让曲线变平滑的
    //             data: [10990, 12496, 15046, 12595, 10906, 7780, 12886, 11437, 13727, 9582, 9268, 11737, 13351, 10888, 13081, 9243, 9956, 9073, 8710, 8992, 14247, 9563, 15098, 11769, 8614, 14008, 13246, 9659, 11226, 11051, 14578, 17186, 13213, 9685, 11198, 12305, 8566, 13855, 11979, 14017, 15202, 10076, 10292, 8554, 9201, 14244, 7434, 7440, 8482, 13299, 14192, 14999, 10088, 11125, 9206, 10661, 11040, 9855, 9308, 11960],
    //             //     markPoint : {
    //             //       data : [
    //             //         {type : 'max', name: '最大值'},
    //             //       {type : 'min', name: '最小值'}
    //             // ]
    //             //}
    //             //   markLine : {
    //             //         data : [
    //             //              {type : 'average', name : '平均值'}
    //             //         ]
    //             //     }
    //         },
    //         {
    //             name: '百度请求数',
    //             type: 'line',
    //             stack: '总量',
    //             //symbol:'none',  //这句就是去掉点的
    //             smooth: true,//这句就是让曲线变平滑的
    //             data: [26700, 17438, 12769, 10035, 9488, 10184, 13328, 11349, 11515, 10973, 17511, 16015, 13463, 13484, 13109, 11569, 7778, 13273, 9690, 9852, 14349, 13021, 15255, 12187, 10644, 11416, 16254, 13376, 12532, 12746, 17141, 14608, 10782, 7396, 13963, 13905, 11280, 12808, 11809, 12561, 15931, 11024, 13522, 12062, 15807, 16195, 12864, 10373, 12752, 13202, 12338, 14833, 14142, 13722, 12451, 11837, 10590, 9145, 11656, 9582],
    //             // markPoint : {
    //             //    data : [
    //             //        {type : 'max', name: '最大值'},
    //             //      {type : 'min', name: '最小值'}
    //             //]
    //             //}
    //             //   markLine : {
    //             //         data : [
    //             //              {type : 'average', name : '平均值'}
    //             //         ]
    //             //     }
    //         }
    //
    //
    //     ]
    // };

    // 使用刚指定的配置项和数据显示图表。
    // myChart.setOption(option);

    setInterval(function(){
        $.ajax({
            url:'http://localhost:8090/requestCountList',
            type: "GET",
            // data:{name:'xx'}, //要给后台传的参数
            success:function(res){
                if(res.size == '20'){

                    myChart(res)
                }
            }
        })
    },10000)


    function myChart(params){
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: 'ECharts 入门示例'
            },
            tooltip: {},
            legend: {
                data:['销量']
            },
            xAxis: {
                data: ["衬衫","羊毛衫","雪纺衫","裤子","高跟鞋","袜子"]
            },
            yAxis: {},
            series: params
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    }

</script>
</body>
</html>